(function(b){var a={htmlTag:{wrapper:".popup-icon-wrapper",iconPreview:"#iconPreview",btnSave:"#btnSave"},vars:{obj_Call:null,current_icon:""},init:function(c){a.vars.obj_Call=null;a.vars.current_icon="";if(c!=undefined){a.vars.obj_Call=c;if(c.val()!=""){a.vars.current_icon=c.val()}}if(b("#g5plus-framework-popup-icon-wrapper").length==0){b.ajax({type:"POST",data:"action=popup_icon",url:g5plus_framework_meta.ajax_url,success:function(d){b("body").append(d);a.showPopup()},error:function(d){}})}else{a.showPopup()}},showPopup:function(){a.processButton();tb_show("Icons","#TB_inline?height=545&width=750&inlineId=g5plus-framework-popup-icon-wrapper",false)},processButton:function(){b("#txtSearch",a.htmlTag.wrapper).val("");b(".list-icon ul li",a.htmlTag.wrapper).show();b("#txtSearch",a.htmlTag.wrapper).keyup(function(){var d=jQuery(this).val(),e=0;b(".list-icon ul li a",a.htmlTag.wrapper).each(function(){if(b(this).attr("title").search(new RegExp(d,"i"))<0){b(this).parent().fadeOut()}else{b(this).parent().show();e++}})});b(".list-icon ul li a",a.htmlTag.wrapper).off("click").on("click",function(){a.vars.current_icon=b(this).attr("title");a.setPreview()});b(a.htmlTag.btnSave,a.htmlTag.wrapper).off("click").on("click",function(){tb_remove();if(a.vars.obj_Call!=null&&a.vars.obj_Call!=undefined){a.vars.obj_Call.val(a.vars.current_icon);a.vars.obj_Call.trigger("change")}});a.setPreview();if(a.vars.current_icon!=""){var c=b('.list-icon ul li a[title="'+a.vars.current_icon+'"]',a.htmlTag.wrapper);if(c.length>0){c.addClass("active");setTimeout(function(){b(".list-icon",a.htmlTag.wrapper).animate({scrollTop:c.position().top},1000)},500)}}},setPreview:function(){b(".list-icon ul li a",a.htmlTag.wrapper).removeClass("active");if(a.vars.current_icon!=""){b(a.htmlTag.iconPreview+" i",a.htmlTag.wrapper).attr("class",a.vars.current_icon);b(a.htmlTag.iconPreview,a.htmlTag.wrapper).prev("span").text(a.vars.current_icon)}}};b(document).ready(function(){setTimeout(function(){b(document).on("click",".browse-icon",function(){var c=b(this).prev("input");a.init(c)});b(document).on("change",".input-icon",function(){var c=b(this).val();b(".icon-preview > i",b(this).parent()).attr("class",c)})},1000)})})(jQuery);