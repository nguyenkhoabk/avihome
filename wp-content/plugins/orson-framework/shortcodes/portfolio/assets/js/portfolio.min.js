(function(b){var c=true;var a={vars:{filter_id:"",portfolio_items:[],galleries:[]},init:function(){this.filterCarousel();this.filterRow();this.loadMore();this.viewGallery();this.resize();this.selectCategory();this.singleTwoColumns()},singleTwoColumns:function(){var d=b(".portfolio-images",".portfolio-two-columns");var h=b(".portfolio-content-wrap",".portfolio-two-columns");if(typeof d!="undefined"&&typeof h!="undefined"){var f=b(d).outerHeight();var e=b(h).outerHeight();if(typeof b(h).position()!="undefined"){var i=b(d).position().top;var g=f-e;b(window).scroll(function(){a.scrollInfo(h,g,i)});b(window).resize(function(){a.scrollInfo(h,g,i)})}}},loadMore:function(){var d=true;b(".portfolio-load-more").each(function(){b(this).on("click",function(f){f.preventDefault();if(d){d=false;var e=b(this).parent().prev();var g=b(this).button("loading");var h=b(this);b.ajax({url:g5plus_portfolio_meta.ajax_url,data:{action:"portfolio_load_more",current_page:h.data("current_page"),columns:h.data("columns"),category:h.data("category"),item_per_page:h.data("item_per_page"),overlay_style:h.data("overlay_style"),icon_color_scheme:h.data("icon_color_scheme"),image_size:h.data("image_size"),padding:h.data("padding")},success:function(j){var i=b(".portfolio-item",j).css({opacity:0});var k=b(".portfolio-load-more",j).attr("data-current_page");if(typeof(k)!="undefined"){h.attr("data-current_page",k);h.data("current_page",k)}else{h.parent().remove()}e.append(i);i.imagesLoaded({background:true},function(){i.animate({opacity:1});e.isotope("appended",i);g.button("reset");e.prev().children().children().first().click();d=true})},error:function(i){d=true}})}})})},filterCarousel:function(){b(".portfolio-category.owl-carousel").each(function(){var d=b(this).prev().children().children("a");b(d).button({loadingText:'<span class="fa fa-spinner fa-spin"></span> Loading...'});b(d).parent().next("select").children().button({loadingText:'<span class="fa fa-spinner fa-spin"></span> Loading...'});b(d).on("click",function(j){j.preventDefault();var h=b(this);var g=true;if(h.hasClass("filter-active")||(h.hasClass("btn")&&!h.hasClass("btn-light"))){h.css("cursor","not-allowed");g=false}else{h.parent().children("a").css("cursor","wait");if(c&&g){c=false;var k=b(this).data("filter");h.parent().next("select").children("option").removeAttr("selected");h.parent().next("select").children('option[value="'+k+'"]').attr("selected","selected");a.vars.filter_id=h.parent().data("filter_id");h.parent().children(".btn").addClass("btn-light");h.removeClass("btn-light");h.parent().children("a").removeClass("filter-active");h.addClass("filter-active");var e=h.parent().parent().parent();e.css("height",e.outerHeight());if(typeof a.vars.portfolio_items[k+"-"+a.vars.filter_id]=="undefined"){var m=h.button("loading");h.parent().next("select").children().button("loading");b.ajax({url:g5plus_portfolio_meta.ajax_url,data:{action:"portfolio_filter_carousel",category:h.data("filter"),hover_effect:h.parent().data("hover_effect"),columns:h.parent().data("columns"),overlay_style:h.parent().data("overlay_style"),icon_color_scheme:h.parent().data("icon_color_scheme"),image_size:h.parent().data("image_size"),padding:h.parent().data("padding")},success:function(o){var n=b(".portfolio-item",o);a.vars.portfolio_items[k+"-"+a.vars.filter_id]=n;var p=h.parent().parent().next(".portfolio-category.owl-carousel");p.css("opacity",0);p.trigger("destroy.owl.carousel").removeClass("owl-carousel owl-loaded");p.find(".owl-stage-outer").children().unwrap();p.html(n);a.setItemEffect(n,"hide");p.css("opacity",1);p.addClass("owl-carousel");G5Plus.common.owlCarousel();p.imagesLoaded(function(){n=b(".portfolio-item",p);a.setItemEffect(n,"show");e.css("height","auto")});m.button("reset");h.parent().next("select").children().button("reset");c=true;h.parent().next("select").removeAttr("disabled");h.parent().children("a").css("cursor","pointer");h.parent().children(".filter-active"||"a:not(.btn-light)").css("cursor","not-allowed")},error:function(n){m.button("reset");c=true}})}else{var i=h.parent().parent().next(".portfolio-category.owl-carousel");var f=a.vars.portfolio_items[k+"-"+a.vars.filter_id];i.css("opacity",0);i.trigger("destroy.owl.carousel").removeClass("owl-carousel owl-loaded");i.find(".owl-stage-outer").children().unwrap();i.html(f);a.setItemEffect(f,"hide");i.css("opacity",1);i.addClass("owl-carousel");G5Plus.common.owlCarousel();i.imagesLoaded(function(){f=b(".portfolio-item",i);a.setItemEffect(f,"show");e.css("height","auto")});c=true;h.parent().next("select").removeAttr("disabled");h.parent().children("a").css("cursor","pointer");h.parent().children(".filter-active"||"a:not(.btn-light)").css("cursor","not-allowed")}}}})})},filterRow:function(){var e=b(".portfolio-filter");var g=b("body").hasClass("rtl");b('.portfolio-content:not(".owl-carousel")').each(function(){var h=b(this);h.imagesLoaded(function(){h.isotope({itemSelector:".portfolio-item",layoutMode:"fitRows",isOriginLeft:!g,transitionDuration:"0.8s"})})});b(e).each(function(){b(this).on("click","a",function(){var i=true;if(b(this).hasClass("filter-active")||(b(this).hasClass("btn")&&!b(this).hasClass("btn-light"))){i=false}var h=b(this).parent().parent().next(".portfolio-content");if(c&&i){var j=b(this).attr("data-filter");h.isotope({filter:j});b(this).parent().children("a").css("cursor","pointer");b(this).css("cursor","not-allowed");b(this).parent().next("select").removeAttr("disabled");b(this).parent().next("select").children("option").removeAttr("selected");b(this).parent().next("select").children('option[value="'+j+'"]').attr("selected","selected")}});b(this).on("click",".filter-tab",function(){var h=true;if(b(this).hasClass("filter-active")||(b(this).hasClass("btn")&&!b(this).hasClass("btn-light"))){h=false}if(c&&h){b(this).parent().children(".filter-tab").removeClass("filter-active");b(this).addClass("filter-active")}});b(this).on("click",".btn",function(){var h=true;if(b(this).hasClass("filter-active")||(b(this).hasClass("btn")&&!b(this).hasClass("btn-light"))){h=false}if(c&&h){b(this).parent().children(".btn").addClass("btn-light");b(this).removeClass("btn-light")}})});var f=b(".filter-archive").data("active");if(typeof(f)!="undefined"){var d=b(".filter-archive a[data-filter='"+f+"']");d.click()}b(".portfolio-content").isotope()},transformY:function(d,e){d.css("transform","translateY("+e+"px)");d.css("-webkit-transform","translateY("+e+"px)");d.css("transform","translateY("+e+"px)")},scrollInfo:function(g,e,i){var f=b(window).scrollTop()+120;var d=b(window).width();var h=f-i;if(d>992&&e>0&&h>0){if(h<=e){a.transformY(g,h)}else{a.transformY(g,e)}}else{a.transformY(g,0)}},viewGallery:function(){b(document).on("click","a.view-gallery",function(g){g.preventDefault();var f=b("a.view-gallery");b(f).button({loadingText:'<span class="fa fa-spinner fa-spin"></span>'});var e=b(this).attr("data-post-id");var h=b(this);if(typeof a.vars.galleries[e]=="undefined"){var d=b(this).button("loading");b.ajax({url:g5plus_portfolio_meta.ajax_url,type:"GET",data:({action:"portfolio_load_gallery",post_id:e}),success:function(j){var i=JSON.parse(j);h.lightGallery({dynamic:true,dynamicEl:i,thumbWidth:80});d.button("reset");a.vars.galleries[e]=JSON.parse(j)},error:function(){d.button("reset")}})}else{h.lightGallery({dynamic:true,dynamicEl:a.vars.galleries[e]});if(typeof l!="undefined"){l.stop();h.removeClass("onclick")}}})},setItemEffect:function(f,d){if(d=="hide"){f.css("transition","opacity 1.5s linear, transform 1s");f.css("-webkit-transition","opacity 1.5s linear, transform 1s");f.css("-moz-transition","opacity 1.5s linear, transform 1s");f.css("-ms-transition","opacity 1.5s linear, transform 1s");f.css("-o-transition","opacity 1.5s linear, transform 1s");f.css("opacity",0);f.css("transform","scale(0.2)");f.css("-ms-transform","scale(0.2)");f.css("-webkit-transform","scale(0.2)")}if(d=="show"){for(var e=0;e<f.length;e++){(function(h){var g=100*e;setTimeout(function(){b(f[h]).css("opacity",1);b(f[h]).css("transform","scale(1)");b(f[h]).css("-ms-transform","scale(1)");b(f[h]).css("-webkit-transform","scale(1)")},g)})(e)}}},resize:function(){b(window).resize(function(){b(".portfolio-category.owl-carousel").each(function(){var d=b(this);setTimeout(function(){var e=b(".portfolio-item",d);a.setItemEffect(e,"show")},500)})});b(window).on("orientationchange",function(){b(".portfolio-category.owl-carousel").each(function(){var d=b(this);setTimeout(function(){var e=b(".portfolio-item",d);a.setItemEffect(e,"show")},500)})})},selectCategory:function(){var d=b("select.portfolio-filter-group");d.off();b(d).on("change",function(f){b(this).attr("disabled","disabled");f.preventDefault();var g=b("option:selected",this).attr("value");var e=b(this).prev().children('[data-filter="'+g+'"]');e.click()})}};b(document).ready(function(){a.init()});b(window).resize(function(){a.singleTwoColumns()})})(jQuery);